(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,a,n){e.exports=n(192)},122:function(e,a,n){},124:function(e,a,n){},125:function(e,a,n){},189:function(e,a,n){},192:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),c=n(9),o=n.n(c),l=(n(122),n(123),n(124),n(18)),s=(n(125),n(194));function i(e){var a=e.name,n=e.label,t=void 0===n?a:n,c=e.type,o=void 0===c?"text":c,l=e.onChange,i=e.value,u=e.showLabel,m=void 0!==u&&u;e.required;return r.a.createElement("div",{className:"formRow"},m&&r.a.createElement("label",null,t,":"),r.a.createElement(s.a,{placeholder:m?void 0:t,value:i,type:o,onChange:function(e){l(e.target.value)}}))}var u=n(193),m=n(57),d=n(21),p="",E=function(e,a,n,t,r,c,o){"Register"===e?n===t?fetch("".concat(p,"/api/newUser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.toLowerCase(),password:n,email:r})}).then(function(e){e.ok?o(a,[]):406===e.status?c("username in use"):c("unknown error")}):c("paswword not match"):fetch("".concat(p,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:n})}).then(function(e){e.ok?e.json().then(function(e){c(""),o(e.username,e.cameras)}):(console.log(e),401===e.status?c("worng username or password"):c("unknown error"))}).catch(function(e){c("unknown error"),console.log(e)})},f="LOGIN_USER",v="LOGOUT_USER",h="ADD_NEW_CAMERA";var g=Object(d.b)(function(){},function(e,a){return{LoginUser:function(a,n){e(function(e,a){return{type:f,username:e,cameras:a}}(a,n))}}})(function(e){var a=e.LoginUser,n=Object(t.useState)("Login"),c=Object(l.a)(n,2),o=c[0],s=c[1],d=Object(t.useState)(""),p=Object(l.a)(d,2),f=p[0],v=p[1],h=Object(t.useState)(""),g=Object(l.a)(h,2),b=g[0],w=g[1],O=Object(t.useState)(""),C=Object(l.a)(O,2),y=C[0],j=C[1],N=Object(t.useState)(""),S=Object(l.a)(N,2),k=S[0],_=S[1],L=Object(t.useState)(""),R=Object(l.a)(L,2),T=R[0],A=R[1];return r.a.createElement(u.a,{title:o},r.a.createElement("div",{className:"LoginRoot"},r.a.createElement("span",{className:"errorSpan"},T),r.a.createElement("form",null,r.a.createElement(i,{name:"Username",value:f,onChange:v,required:!0}),"Register"===o&&r.a.createElement(i,{name:"Email",value:k,onChange:_}),r.a.createElement(i,{name:"Password",type:"password",required:!0,value:b,onChange:w}),"Register"===o&&r.a.createElement(i,{name:"rePassword",label:"Re-type password",type:"password",required:!0,value:y,onChange:j})),r.a.createElement("span",{className:"accountChangeMode",onClick:function(){s("Login"===o?"Register":"Login")}},"Login"===o?"Dont have an account?":"Already have an Account?"),r.a.createElement(m.a,{onClick:function(){E(o,f,b,y,k,A,a)}},o)))}),b=n(32);var w=Object(d.b)(function(e,a){return{username:e.username}})(function(e){return e.username?r.a.createElement(b.a,{push:!0,to:"/grid"}):r.a.createElement("div",{className:"HomePageRoot"},r.a.createElement("h1",{className:"HomePageHeader"},"Best Camera Out There"),r.a.createElement(g,null))});var O=Object(d.b)(function(e,a){return{username:e.username}},function(e,a){return{addCamera:function(a){e(function(e){return{type:h,url:e}}(a))}}})(function(e){var a=e.addCamera,n=e.username,c=e.onDone,o=Object(t.useState)(""),i=Object(l.a)(o,2),d=i[0],E=i[1];return r.a.createElement("div",{className:"AddCamera"},r.a.createElement(u.a,{title:"Add New Camera"},r.a.createElement("div",{className:"cardContainer"},r.a.createElement("div",null,r.a.createElement(s.a,{placeholder:"Camera url",value:d,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",{className:"buttons"},r.a.createElement(m.a,{onClick:function(){E("rtsp://wowzaec2demo.streamlock.net/vod/mp4:BigBuckBunny_115k.mov")}}," use Example "),r.a.createElement(m.a,{type:"primary",onClick:function(){a(d),function(e,a){fetch("".concat(p,"/api/addCamera"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.toLowerCase(),url:e})})}(d,n),c()}},"Add camera")))))});function C(e){var a=e.url,n=e.title;return r.a.createElement("iframe",{src:"https://wcs5-eu.flashphoner.com:8888/embed_player?urlServer=&streamName=".concat(a,"&mediaProviders=WebRTC,Flash,MSE,WSPlayer"),marginWidth:"0",marginHeight:"0",frameBorder:"0",scrolling:"no",allowFullScreen:"allowfullscreen",title:n,className:"playerContainer"})}var y=n(195);n(189);var j=Object(d.b)(function(e,a){return{cameras:e.cameras,username:e.username}})(function(e){var a=e.cameras,n=e.username,c=Object(t.useState)(!a.length),o=Object(l.a)(c,2),s=o[0],i=o[1];return n?r.a.createElement("div",{className:"Grid"},s?r.a.createElement(O,{onDone:i}):r.a.createElement("div",{className:"videoGridContainer"},a.map(function(e,a){if(e.active)return r.a.createElement(C,{url:e.url,key:a,title:a})})),!s&&r.a.createElement("div",{className:"floatingButton"},r.a.createElement(y.a,{title:"add new camera"},r.a.createElement(m.a,{type:"primary",shape:"circle",icon:"plus",size:"large",onClick:function(){i(!0)}})))):r.a.createElement(b.a,{to:"/"})}),N=n(52),S=n(55),k=n(114),_=n(80),L={username:null,cameras:[]};var R=Object(S.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f:return Object(_.a)({},e,{username:a.username,cameras:a.cameras});case v:return L;case h:return Object(_.a)({},e,{cameras:[].concat(Object(k.a)(e.cameras),[{url:a.url,active:!0}])});default:return e}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var T=function(){return r.a.createElement(d.a,{store:R},r.a.createElement(N.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(b.b,{exact:!0,path:"/",component:w}),r.a.createElement(b.b,{path:"/grid",component:j}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[117,1,2]]]);
//# sourceMappingURL=main.90b596f1.chunk.js.map